# Kommentoi vain mitä koodi ei pysty sanomaan

Ero teorian ja käytännön välillä on suurempi käytännössä kuin teoriassa - huomio pätee ainakin kommentteihin. Teoriassa koodin kommentointi kuulostaa hyvältä: Tarjoi lukijolle yksityiskohtia, selostus, mitä on tekeillä. Mikä voisikaan olla avuliaampaa kuin olla avulias? Kuitenkin käytännössä kommenteista on tullut riesa. Kuten muidenkin kirjoituksen muotojen kanssa, on kommenttienkin kirjoittaminen vaatii taitoa. Suuri osa taidosta on tietää, milloin jättää kommentti kirjoittamatta.

Kun koodi on virheellistä, kääntäjät, tulkit ja muut työkalut ilmoittavat siitä. Jos koodi on toiminnallisesti väärin, katselmoinnit, staattiset analyysit, testit ja päivittäinen koodin tuotannossa käyttäminen poistaa useimmat virheet. Mutta entä kommentit? Kirjassa *Elements of Programming Style* Kernighan ja Plauger kommentoivat, että "kommentti on arvoton (tai negatiivinen arvoltaan) jos se on väärässä." Ja silti sellaiset kommentit roskaavat ja pysyvät koodikannassa eri tavoin kuin ohjelmointivirheet voisivat koskaan pysyä. Ne aiheuttavat jatkuvia häiriötekijöitä ja väärää tietoa, hienoinen, mutta jatkuva hidaste ohjelmoijan ajattelulle.

Entä kommentit, jotka eivät ole teknisesti väärin, mutta eivät tuota lisäarvoa? Sellaiset kommentit ovat kohinaa. Koodia toistavat kommentit eivät tarjoa lukijalle mitään - jonkin toistaminen sekä koodissa että luonnollisessa kielessä ei tee siitä todempaa tai oikeampaa. Pois kommentoitu koodi ei ole suoritettavaa koodia, joten siitä ei ole hyötyä lukijalle, eikä suoritettavalle ohjelmalle(runtime). Kommentti myös vanhenee nopeasti. Versioihin liittyvät kommentit ja pois kommentoidut koodit yrittävät auttaa versiointiin ja historiaan liittyvissä kysymyksissä. Tällasisiin kysymyksiin on jo vastattu (paljon tehokkaammine) versionhallinnan työkaluilla.

Kohinakommenttien ja virhellisten kommenttien yleisyys koodikannassa kannustaa ohjelmoijia sivuuttamaan kaikki kommentit, joko ohittamalla ne tai piilottamalla ne. Ohjelmoijat ovat kekselijäitä ja kiertävät kaiken, joka vaikuttaa vahingoittavan: kommenttien laskostaminen(folding); väriskeeman muuttaminen, jotta kommentit ja taustaväri ovat samat; kommenttien suodattaminen skripteillä. Pelastaaksesi koodikannan ohjelmoijien väärinkäytöksiltä ja vähentääksesi arvokkaiden kommenttien ohittamisen riskiä kommentteja tulisi käsitellä koodin tavoin. Jokaisen kommentin tulisi tuoda lisäarvoa lukijalle, muuten se ptäisi poistaa turhanan tai kirjoittaa eri tavoin.

Entä mitä arvo tarkoittaa? Kommenttien tulisi sanoa jotain, mitä koodi ei voi, eikä pysty sanomaan. Kommentti joka selostaa mitä koodi jo sanoo on kutsu koodin rakenteen tai ohjelmointikäytäntöjen muuttamiseen siten, että koodi puhuu puolestaan. Huonojen metodien tai luokkien nimien kompensoinnin sijaan nimeä ne uudelleen. Funktion pitkien osien kommentoinnin sijaan, luo pienempiä funktioita joiden nimet kuvaavat aiemmpien osioiden tarkoituksia. Yritä ilmaista mahdollisimman paljon koodin välityksellä. Vajeet koodin ilmaisukyvyssä ovat mahdollisia ehdokkaita hyödyllisiin kommentteihin. Kommentoi, mitä koodi ei voi sanoa, älä vain sitä, mitä se ei sano.

Alkuperäinen kirjoittaja [Kevlin Henney](http://programmer.97things.oreilly.com/wiki/index.php/Kevlin_Henney)